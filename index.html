<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pencarian Cuaca</title>
    <style>
    body { font-family: sans-serif; padding: 20px; }
     #search-container { margin-bottom: 20px; }
    #tampilan { border: 1px solid #ccc; padding: 15px; border-radius: 5px; }
    .weather-detail { margin-bottom: 10px; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <h1>Pencarian Cuaca</h1>

    <div id="search-container">
    <label for="lokasi-input">Lokasi:</label>
    <input type="text" id="lokasi-input" placeholder="Masukkan nama kota (e.g., London)">
    <button id="cari-button">Cari Cuaca</button>
    </div>
    
    <hr>
    <h2 id="lokasi-judul">Cuaca di: <span id="lokasi-tampil"></span></h2>

    <div id="tampilan">
    <p>Masukkan lokasi dan klik 'Cari Cuaca' untuk melihat detail.</p> </div>

<script>
const apiKey = "81cb42b09a6643e0afb20753250710";
const baseUrl = `http://api.weatherapi.com/v1/current.json?key=${apiKey}&aqi=no&q=`;
const lokasiInput = document.getElementById("lokasi-input");
const cariButton = document.getElementById("cari-button");
const tampilanDiv = document.getElementById("tampilan");
const lokasiTampil = document.getElementById("lokasi-tampil");

 function fetchWeatherData(query) {
 if (!query) {
 tampilanDiv.innerHTML = "<p style='color: red;'>⚠️ Harap masukkan nama lokasi.</p>";
 lokasiTampil.textContent = "Tidak Ditemukan";
 return;
}

 const urlapi = baseUrl + query;

tampilanDiv.innerHTML = "<p>⏳ Memuat data...</p>";
lokasiTampil.textContent = query;

 $.ajax({
url: urlapi,
method: "GET",
success: function(data){
console.log(data);
const location = data.location;
 const current = data.current;

lokasiTampil.textContent = location.name + ", " + location.country;
let htmlContent = `
<h3>Detail Cuaca</h3>
<div class="weather-detail">Suhu: <strong>${current.temp_c}°C</strong></div>
<div class="weather-detail">Kelembaban: <strong>${current.humidity}%</strong></div>


<h3>Lokasi</h3>
<div class="weather-detail">Negara: ${location.country}</div>
 <div class="weather-detail">Provinsi/Region: ${location.region}</div>
 <div class="weather-detail">Kota/Kecamatan: ${location.name}</div>
 <div class="weather-detail">Lintang (Latitude): ${location.lat}</div>
<div class="weather-detail">Bujur (Longitude): ${location.lon}</div>
`;

tampilanDiv.innerHTML = htmlContent;
},
error : function(error){
console.error("Gagal mengambil data cuaca:", error);
    lokasiTampil.textContent = "Tidak Ditemukan";
    tampilanDiv.innerHTML = "<p style='color: red;'>❌ Gagal mengambil data cuaca. Periksa nama lokasi dan coba lagi.</p>";
    }
    });
    }
cariButton.addEventListener('click', function() {
const query = lokasiInput.value.trim();
 fetchWeatherData(query);
 });
 lokasiInput.addEventListener('keypress', function(e) {
if (e.key === 'Enter') {
cariButton.click();
 }
});

</script>
</body>
</html>